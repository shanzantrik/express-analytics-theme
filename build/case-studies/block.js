(()=>{"use strict";const e=window.React,s=window.wp.blocks,a=window.wp.i18n,t=window.wp.blockEditor,l=window.wp.components,c=window.wp.data,n=window.wp.element;(0,s.registerBlockType)("express-analytics/case-studies",{edit:({attributes:s,setAttributes:r})=>{const{heading:i,description:o,columns:d,showFilters:p,selectedIndustry:u,postsToShow:m,orderBy:_,order:y,backgroundColor:g,textColor:b,gradient:x}=s,w=(0,t.useBlockProps)({className:`wp-block-express-analytics-case-studies has-${g}-background-color has-${b}-color has-text-color has-background`,style:{backgroundColor:g,color:b,backgroundImage:x}}),{caseStudies:h,industries:k,isLoading:E}=(0,c.useSelect)((e=>{const{getEntityRecords:s,getTaxonomyTerms:a}=e("core"),t={per_page:m,_embed:!0,orderby:_,order:y};return u&&(t.industry=u),{caseStudies:s("postType","case-study",t),industries:a("industry"),isLoading:!s("postType","case-study",t)||!a("industry")}}),[m,u,_,y]),v=k?[{label:(0,a.__)("All Industries","express-analytics"),value:""},...k.map((e=>({label:e.name,value:e.id})))]:[];return(0,e.createElement)(n.Fragment,null,(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(l.PanelBody,{title:(0,a.__)("Layout Settings","express-analytics")},(0,e.createElement)(l.RangeControl,{label:(0,a.__)("Columns","express-analytics"),value:d,onChange:e=>r({columns:e}),min:1,max:4}),(0,e.createElement)(l.RangeControl,{label:(0,a.__)("Number of Case Studies","express-analytics"),value:m,onChange:e=>r({postsToShow:e}),min:1,max:12}),(0,e.createElement)(l.ToggleControl,{label:(0,a.__)("Show Filters","express-analytics"),checked:p,onChange:e=>r({showFilters:e})}),(0,e.createElement)(l.SelectControl,{label:(0,a.__)("Order By","express-analytics"),value:_,options:[{label:(0,a.__)("Date","express-analytics"),value:"date"},{label:(0,a.__)("Title","express-analytics"),value:"title"},{label:(0,a.__)("Menu Order","express-analytics"),value:"menu_order"}],onChange:e=>r({orderBy:e})}),(0,e.createElement)(l.SelectControl,{label:(0,a.__)("Order","express-analytics"),value:y,options:[{label:(0,a.__)("Descending","express-analytics"),value:"desc"},{label:(0,a.__)("Ascending","express-analytics"),value:"asc"}],onChange:e=>r({order:e})}))),(0,e.createElement)("div",{...w},(0,e.createElement)("div",{className:"wp-block-expressanalytics-case-studies__content"},(0,e.createElement)(t.RichText,{tagName:"h2",className:"wp-block-expressanalytics-case-studies__heading",value:i,onChange:e=>r({heading:e}),placeholder:(0,a.__)("Add heading...","express-analytics")}),(0,e.createElement)(t.RichText,{tagName:"p",className:"wp-block-express-analytics-case-studies__description",value:o,onChange:e=>r({description:e}),placeholder:(0,a.__)("Add description...","express-analytics")}),p&&k&&(0,e.createElement)("div",{className:"wp-block-express-analytics-case-studies__filters"},(0,e.createElement)(l.SelectControl,{value:u,options:v,onChange:e=>r({selectedIndustry:e})})),E?(0,e.createElement)("div",{className:"wp-block-expressanalytics-case-studies__loading"},(0,e.createElement)(l.Spinner,null)):(0,e.createElement)("div",{className:"wp-block-express-analytics-case-studies__grid",style:{gridTemplateColumns:`repeat(${d}, 1fr)`}},h?.map((s=>(0,e.createElement)("div",{key:s.id,className:"wp-block-express-analytics-case-studies__item"},s._embedded?.["wp:featuredmedia"]?.[0]&&(0,e.createElement)("img",{src:s._embedded["wp:featuredmedia"][0].source_url,alt:s._embedded["wp:featuredmedia"][0].alt_text,className:"wp-block-express-analytics-case-studies__image"}),(0,e.createElement)("h3",{className:"wp-block-express-analytics-case-studies__item-title"},s.title.rendered),(0,e.createElement)("div",{className:"wp-block-express-analytics-case-studies__item-excerpt",dangerouslySetInnerHTML:{__html:s.excerpt.rendered}}),(0,e.createElement)("a",{href:s.link,className:"wp-block-express-analytics-case-studies__link"},(0,a.__)("Read Case Study","express-analytics")))))))))},save:({attributes:s})=>{const{heading:a,description:l,columns:c,showFilters:n,backgroundColor:r,textColor:i,gradient:o}=s,d=t.useBlockProps.save({className:`wp-block-express-analytics-case-studies has-${r}-background-color has-${i}-color has-text-color has-background`,style:{backgroundColor:r,color:i,backgroundImage:o}});return(0,e.createElement)("div",{...d},(0,e.createElement)("div",{className:"wp-block-express-analytics-case-studies__content"},(0,e.createElement)(t.RichText.Content,{tagName:"h2",className:"wp-block-express-analytics-case-studies__heading",value:a}),(0,e.createElement)(t.RichText.Content,{tagName:"p",className:"wp-block-express-analytics-case-studies__description",value:l}),n&&(0,e.createElement)("div",{className:"wp-block-express-analytics-case-studies__filters"}),(0,e.createElement)("div",{className:"wp-block-express-analytics-case-studies__grid",style:{gridTemplateColumns:`repeat(${c}, 1fr)`}})))}})})();