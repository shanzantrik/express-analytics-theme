(()=>{"use strict";const e=window.React,a=window.wp.blocks,t=window.wp.blockEditor,s=window.wp.components,l=window.wp.i18n;(0,a.registerBlockType)("expressanalytics/testimonials",{edit:({attributes:a,setAttributes:n})=>{const{heading:i,description:o,layout:c,columns:r,testimonials:m,backgroundColor:p,textColor:_,gradient:u}=a,y=(0,t.useBlockProps)({className:`wp-block-expressanalytics-testimonials layout-${c}`,style:{backgroundColor:p,color:_,backgroundImage:u}}),d=(e,a,t)=>{const s=[...m];s[e]={...s[e],[a]:t},n({testimonials:s})};return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(t.InspectorControls,null,(0,e.createElement)(s.PanelBody,{title:(0,l.__)("Layout Settings","expressanalytics")},(0,e.createElement)(s.SelectControl,{label:(0,l.__)("Layout","expressanalytics"),value:c,options:[{label:(0,l.__)("Carousel","expressanalytics"),value:"carousel"},{label:(0,l.__)("Grid","expressanalytics"),value:"grid"}],onChange:e=>n({layout:e})}),"grid"===c&&(0,e.createElement)(s.RangeControl,{label:(0,l.__)("Columns","expressanalytics"),value:r,onChange:e=>n({columns:e}),min:1,max:4}))),(0,e.createElement)("div",{...y},(0,e.createElement)("div",{className:"wp-block-expressanalytics-testimonials__content"},(0,e.createElement)(t.RichText,{tagName:"h2",className:"wp-block-expressanalytics-testimonials__heading",value:i,onChange:e=>n({heading:e}),placeholder:(0,l.__)("Enter heading...","expressanalytics")}),(0,e.createElement)(t.RichText,{tagName:"p",className:"wp-block-expressanalytics-testimonials__description",value:o,onChange:e=>n({description:e}),placeholder:(0,l.__)("Enter description...","expressanalytics")}),(0,e.createElement)("div",{className:"wp-block-expressanalytics-testimonials__grid",style:{gridTemplateColumns:"grid"===c?`repeat(${r}, 1fr)`:"none"}},m.map(((a,i)=>(0,e.createElement)("div",{key:i,className:"wp-block-expressanalytics-testimonials__item"},(0,e.createElement)(s.Button,{className:"wp-block-expressanalytics-testimonials__remove-button",onClick:()=>(e=>{const a=m.filter(((a,t)=>t!==e));n({testimonials:a})})(i),isSmall:!0,isDestructive:!0},(0,l.__)("Remove","expressanalytics")),(0,e.createElement)(t.MediaUpload,{onSelect:e=>d(i,"image",e),allowedTypes:["image"],value:a.image,render:({open:t})=>(0,e.createElement)(s.Button,{className:"wp-block-expressanalytics-testimonials__image-button",onClick:t},a.image?(0,e.createElement)("img",{src:a.image.url,alt:a.image.alt}):(0,l.__)("Upload Image","expressanalytics"))}),(0,e.createElement)(t.RichText,{tagName:"blockquote",className:"wp-block-expressanalytics-testimonials__quote",value:a.quote,onChange:e=>d(i,"quote",e),placeholder:(0,l.__)("Enter testimonial...","expressanalytics")}),(0,e.createElement)("div",{className:"wp-block-expressanalytics-testimonials__meta"},(0,e.createElement)(t.RichText,{tagName:"span",className:"wp-block-expressanalytics-testimonials__author",value:a.author,onChange:e=>d(i,"author",e),placeholder:(0,l.__)("Author name...","expressanalytics")}),(0,e.createElement)(t.RichText,{tagName:"span",className:"wp-block-expressanalytics-testimonials__position",value:a.position,onChange:e=>d(i,"position",e),placeholder:(0,l.__)("Position...","expressanalytics")}),(0,e.createElement)(t.RichText,{tagName:"span",className:"wp-block-expressanalytics-testimonials__company",value:a.company,onChange:e=>d(i,"company",e),placeholder:(0,l.__)("Company...","expressanalytics")})))))),(0,e.createElement)(s.Button,{className:"wp-block-expressanalytics-testimonials__add-button",onClick:()=>{n({testimonials:[...m,{quote:"",author:"",position:"",company:"",image:null}]})},variant:"secondary"},(0,l.__)("Add Testimonial","expressanalytics")))))},save:({attributes:a})=>{const{heading:s,description:l,layout:n,columns:i,testimonials:o,backgroundColor:c,textColor:r,gradient:m}=a,p=t.useBlockProps.save({className:`wp-block-expressanalytics-testimonials layout-${n}`,style:{backgroundColor:c,color:r,backgroundImage:m}});return(0,e.createElement)("div",{...p},(0,e.createElement)("div",{className:"wp-block-expressanalytics-testimonials__content"},(0,e.createElement)(t.RichText.Content,{tagName:"h2",className:"wp-block-expressanalytics-testimonials__heading",value:s}),(0,e.createElement)(t.RichText.Content,{tagName:"p",className:"wp-block-expressanalytics-testimonials__description",value:l}),(0,e.createElement)("div",{className:"wp-block-expressanalytics-testimonials__grid",style:{gridTemplateColumns:"grid"===n?`repeat(${i}, 1fr)`:"none"},"data-layout":n},o.map(((a,s)=>(0,e.createElement)("div",{key:s,className:"wp-block-expressanalytics-testimonials__item"},a.image&&(0,e.createElement)("img",{className:"wp-block-expressanalytics-testimonials__image",src:a.image.url,alt:a.image.alt}),(0,e.createElement)(t.RichText.Content,{tagName:"blockquote",className:"wp-block-expressanalytics-testimonials__quote",value:a.quote}),(0,e.createElement)("div",{className:"wp-block-expressanalytics-testimonials__meta"},(0,e.createElement)(t.RichText.Content,{tagName:"span",className:"wp-block-expressanalytics-testimonials__author",value:a.author}),(0,e.createElement)(t.RichText.Content,{tagName:"span",className:"wp-block-expressanalytics-testimonials__position",value:a.position}),(0,e.createElement)(t.RichText.Content,{tagName:"span",className:"wp-block-expressanalytics-testimonials__company",value:a.company}))))))))}})})();